@startuml sequence
title agentUML 專案工作流程（Sequence）

autonumber

actor User
participant "OpenCode Agent\n(draw agent)" as Agent
participant "diagrams/" as Diagrams
participant "agentuml-dev" as Dev
participant "inotifywait" as Inotify
participant "plantuml" as PlantUML
participant "output/" as Output
participant "imv" as Imv

User -> Dev : just dev
Dev -> Inotify : watch diagrams/

User -> Agent : 描述想要的圖表
Agent -> Diagrams : write <name>.puml
User -> Diagrams : save file

Inotify -> Diagrams : observe create/modify/moved_to
Dev -> PlantUML : compile changed .puml
PlantUML -> Output : write <name>.png
Dev -> Imv : imv-msg open output/<name>.png
Dev -> Imv : imv-msg goto -1
Imv --> User : display latest image

@enduml
